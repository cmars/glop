// This agent will ping-pong back and forth internally with its variables.
// Variables are set by shelling out back to glop from within a script that is
// executed by glop.

match (message init) {
  set ping true;
}

match (ping == true) {
  script #!/bin/bash
echo ping
export ADDR
glop setvar ping false
glop setvar pong true
!#
}

match (pong == true) {
  script #!/bin/bash
echo pong
export ADDR
glop setvar ping true
glop setvar pong false
!#
}
